var prvky;var dataJSON;var mapName;registerEvents();function init(a){mapName=a;$.getJSON("resources/data/"+mapName+".json",function(b){dataJSON=b;prvky=b.prvky;generate();$("#app #ansT").html("");$("#app #ansF").html("");$("#app #control").html("");$("#app .slepamapa").attr("src","./resources/data/img/"+mapName+".jpg");$("#app").attr("data-opened","")}).fail(function(d,b,c){alert(c);return})}function generate(){var a;var b;if(Object.keys(prvky).length==0){$("#app #control").html(dataJSON.success)}else{a=prvky[Math.floor(Math.random()*prvky.length)];if(isNaN(a)){if(a==a.toUpperCase()){b=dataJSON.types.upp.name;$("#app #number").css("background",dataJSON.types.upp.bg);$("#app #number").css("color",dataJSON.types.upp.color)}else{b=dataJSON.types.low.name;$("#app #number").css("background",dataJSON.types.low.bg);$("#app #number").css("color",dataJSON.types.low.color)}}else{b=dataJSON.types.num.name;$("#app #number").css("background",dataJSON.types.num.bg);$("#app #number").css("color",dataJSON.types.num.color)}$("#app #number").attr("value",a);$("#app #type").attr("value",b);$("#app #answer").val("")}}function check(){var e=$("#app #number").attr("value");var h=$("#app #type").attr("value");var j=$("#app #answer").val();var a=false;var g=JSON.parse(JSON.stringify(dataJSON[h][e]).toLowerCase());var c=dataJSON[h][e];if(g.indexOf(j.toLowerCase())>-1){$("#app #control").html("Správna odpoveď.");$("#app #ansT").html($("#app #ansT").html()+"<tr><td>"+e+"</td><td>"+j+"</td></tr>");var f=prvky.indexOf(e);if(f>-1&&!a){prvky.splice(f,1)}}else{var b=c[0];for(var d=1;d<c.lenght;d++){b+="/"+c[d]}$("#app #control").html("Zlá odpoveď. (Správna odpoveď: "+b+")");$("#app #ansF").html($("#app #ansF").html()+"<tr><td>"+e+"</td><td>"+j+"</td><td>"+b+"</td></tr>")}$("#app #number").attr("value","");$("#app #type").attr("value","");$("#app #answer").val("");generate()}function close(){$("#app").removeAttr("data-opened")}function registerEvents(){$("a[data-map]").click(function(a){init($(this).attr("data-map"))});$("#app #close").click(function(){close()});$("#app #cheatsheet").click(function(){if(mapName==""){return}window.open("./resources/cheatsheets/"+mapName+".pdf")});$("#app #check").click(function(){if(mapName==""){return}check()});$("#app #generate").click(function(){if(mapName==""){return}generate()});$("#app #answer").keydown(function(b){if(mapName==""){return}var a=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(a==13){b.preventDefault();check()}else{if(a==9){b.preventDefault();generate()}}});$(document).keydown(function(b){var a=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(a==27){close()}})};